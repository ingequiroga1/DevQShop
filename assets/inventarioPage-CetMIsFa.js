import{e as a,z as j,c as b,o as m,a as e,w as P,v as B,F as D,y as N,t as p,A as z,_ as F,h as w,d as q,u as I,B as Q,b as _,x as T,i as G,p as h}from"./index-DIPeDiug.js";import{_ as U}from"./modalProductos.vue_vue_type_script_setup_true_lang-BsKQZ1di.js";const H={class:"container mx-auto p-4 bg-white rounded-lg shadow"},J={class:"flex justify-between items-center mb-4"},K={class:"mb-4"},O={class:"overflow-x-auto"},R={class:"w-full border-collapse text-left"},W={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},Z={class:"px-4 py-2"},ee={class:"px-4 py-2 flex gap-2"},te=["onClick"],oe=["onClick"],se={class:"flex items-center justify-center space-x-4 mt-4"},ae=["disabled"],re={class:"text-lg font-semibold text-gray-700"},le=["disabled"],ne=10,ie={__name:"inventario",props:{products:{type:Array,required:!0},totalProducts:{type:Number,required:!0}},emits:["editar-producto","filtrar-product","cambiar-pagina","add-producto","delete-producto"],setup(g,{emit:o}){const n=o;a(!1),a(null),a(!1),a(null);const i=a(""),r=a(1),u=()=>{n("cambiar-pagina",r.value)};return j(i,d=>{r.value=1,n("filtrar-product",d)}),(d,s)=>(m(),b("div",H,[e("div",J,[s[4]||(s[4]=e("h2",{class:"text-lg font-semibold"},"Gestión de Inventario",-1)),e("button",{onClick:s[0]||(s[0]=t=>d.$emit("add-producto")),class:"bg-primary-color text-white px-4 py-2 rounded hover:bg-blue-700"}," + Agregar Producto ")]),e("div",K,[P(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),placeholder:"Buscar por nombre...",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},null,512),[[B,i.value]])]),e("div",O,[e("table",R,[s[5]||(s[5]=e("thead",null,[e("tr",{class:"bg-gray-100 text-sm font-medium"},[e("th",{class:"px-4 py-2"},"Nombre"),e("th",{class:"px-4 py-2"},"Categoría"),e("th",{class:"px-4 py-2"},"Stock"),e("th",{class:"px-4 py-2"},"Precio"),e("th",{class:"px-4 py-2"},"Código de barras"),e("th",{class:"px-4 py-2"},"Acciones")])],-1)),e("tbody",null,[(m(!0),b(D,null,N(g.products,t=>(m(),b("tr",{key:t.producto_id,class:"hover:bg-gray-50 text-sm"},[e("td",W,p(t.nombre),1),e("td",X,p(t.categorias.nombre),1),e("td",{class:z(["px-4 py-2 font-medium",{"text-red-600":t.stock<5}])},p(t.stock),3),e("td",Y,"$"+p(t.precio_venta.toFixed(2)),1),e("td",Z,p(t.codigo_barras),1),e("td",ee,[e("button",{onClick:v=>d.$emit("editar-producto",t)}," ✏️ ",8,te),e("button",{onClick:v=>d.$emit("delete-producto",t.producto_id)}," 🗑️ ",8,oe)])]))),128))])]),e("div",se,[e("button",{onClick:s[2]||(s[2]=t=>{r.value--,u()}),disabled:r.value===1,class:"px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Anterior ",8,ae),e("span",re," Página "+p(r.value),1),e("button",{onClick:s[3]||(s[3]=t=>{r.value++,u()}),disabled:r.value*ne>=g.totalProducts,class:"px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Siguiente ",8,le)])])]))}},de={props:{isLoading:{type:Boolean,required:!0}}},ce={key:0,class:"spinner"};function ue(g,o,n,i,r,u){return n.isLoading?(m(),b("div",ce,o[0]||(o[0]=[e("div",{class:"double-bounce1"},null,-1),e("div",{class:"double-bounce2"},null,-1)]))):w("",!0)}const pe=F(de,[["render",ue],["__scopeId","data-v-bd987d5d"]]),be={class:"container mx-auto"},me={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},ve={class:"bg-white rounded-lg p-6 w-full max-w-sm"},ge={class:"flex justify-end gap-2"},xe=q({__name:"inventarioPage",setup(g){const o=I(),n=a(!1),i=a(""),r=a("info"),u=a(!1),d=a(""),s=a(!1),t=a(!1),v=a({producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""},subtotal:0,cantidad:0}),f=a(0),k=()=>{s.value=!1,v.value={producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""},subtotal:0,cantidad:0},o.msgProductos&&(r.value=o.msgProductos.tipo,n.value=!0,i.value=o.msgProductos.mensaje,o.msgProductos=null)},$=l=>{v.value={...l},s.value=!0},C=()=>{s.value=!0},E=l=>{f.value=Number(l),t.value=!0};Q(()=>{x("",1,50),S()});const x=async(l,c,y)=>{u.value=!0,await o.fetchProducts(l,c,y),u.value=!1},S=async()=>{await o.fetchProveedores()},A=async()=>{await o.deleteProducto(f.value),t.value=!1,f.value=0,o.msgProductos&&(r.value=o.msgProductos.tipo,n.value=!0,i.value=o.msgProductos.mensaje,o.msgProductos=null)},L=()=>{n.value=!1},M=l=>{x(d.value,l,50)},V=l=>{d.value=l,x(l,1,50)};return(l,c)=>(m(),b("div",be,[P(_(G,{type:r.value,message:i.value,isVisible:n.value,dismissible:"",onClose:L},null,8,["type","message","isVisible"]),[[T,n.value]]),_(pe,{isLoading:u.value},null,8,["isLoading"]),_(ie,{products:h(o).productos,totalProducts:h(o).numeroProductos,onFiltrarProduct:V,onEditarProducto:$,onAddProducto:C,onDeleteProducto:E,onCambiarPagina:M},null,8,["products","totalProducts"]),_(U,{visible:s.value,productoEditar:v.value,onCerrar:k},null,8,["visible","productoEditar"]),t.value?(m(),b("div",me,[e("div",ve,[c[1]||(c[1]=e("h3",{class:"text-lg font-semibold mb-4"},"Confirmar Eliminación",-1)),c[2]||(c[2]=e("p",{class:"text-sm mb-4"}," ¿Estás seguro de que deseas eliminar este producto? ",-1)),e("div",ge,[e("button",{onClick:A,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," Eliminar "),e("button",{onClick:c[0]||(c[0]=y=>t.value=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancelar ")])])])):w("",!0)]))}});export{xe as default};
