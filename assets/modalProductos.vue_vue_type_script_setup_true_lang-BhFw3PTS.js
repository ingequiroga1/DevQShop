import{d as E,u as v,e as c,z as C,c as d,h as _,a as o,t as a,k as P,w as l,v as s,K as f,F as g,y as x,p as R,o as u}from"./index-CCjy-gl9.js";const L={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},T={class:"bg-white rounded-lg p-4 sm:p-6 w-[95%] max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl overflow-y-auto max-h-[90vh] scroll-pb-32"},U={class:"text-lg font-semibold mb-4"},O=["value"],I=["value"],M={class:"flex flex-col sm:flex-row sm:justify-end gap-2 mt-4"},B={type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},N=E({__name:"modalProductos",props:{visible:{type:Boolean,required:!0},productoEditar:{type:Object,default:()=>({producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""}})},proveedor:{type:Object}},emits:["cerrar","producto-guardado"],setup(b,{emit:A}){const p=A,y=v(),m=b,i=c({producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""},subtotal:0,cantidad:0}),n=c(!1),k=c([{id:1,nombre:"Refrescos"},{id:2,nombre:"Pan Dulce"},{id:3,nombre:"FARMACIA"},{id:4,nombre:"PANES"},{id:5,nombre:"GALLETAS"},{id:6,nombre:"BOTANAS"},{id:7,nombre:"PAPELERIA"},{id:8,nombre:"FERRETERIA"},{id:9,nombre:"ACCS. CELULARES"},{id:10,nombre:"ABARROTE"},{id:11,nombre:"DULCERIA"},{id:12,nombre:"AGUA"},{id:13,nombre:"ALIMENTO PARA MASCOTAS"},{id:14,nombre:"LACTEOS"},{id:15,nombre:"EMBUTIDOS"},{id:16,nombre:"BEBIDAS"},{id:17,nombre:"FORMULAS LACTEAS"},{id:18,nombre:"ALIMENTOS"},{id:19,nombre:"SIN CATEGORIA"}]);C(()=>m.productoEditar,t=>{t.producto_id>0?(i.value={...t},n.value=!0):(i.value={producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""},subtotal:0,cantidad:0},n.value=!1),m.proveedor&&(i.value.idproveedor=m.proveedor.id),console.log("Producto a editar:",i.value)},{immediate:!0});const S=()=>{p("cerrar")},w=async()=>{const t=v();n.value?await t.updateProducto(i.value):await t.addProducto(i.value),t.editingProduct={producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""}},p("cerrar")};return(t,e)=>b.visible?(u(),d("div",L,[o("div",T,[o("h3",U,a(n.value?"Editar":"Agregar")+" Producto ",1),o("form",{onSubmit:P(w,["prevent"]),class:"space-y-4"},[o("div",null,[e[7]||(e[7]=o("label",{class:"block text-sm font-medium mb-1"},"Nombre:",-1)),l(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>i.value.nombre=r),type:"text",required:"",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},null,512),[[s,i.value.nombre]])]),o("div",null,[e[9]||(e[9]=o("label",{class:"block text-sm font-medium mb-1"},"Categoría:",-1)),l(o("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>i.value.categorias.categoria_id=r),required:"",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},[e[8]||(e[8]=o("option",{value:"",disabled:""},"Seleccione una categoría",-1)),(u(!0),d(g,null,x(k.value,r=>(u(),d("option",{key:r.id,value:r.id},a(r.nombre),9,O))),128))],512),[[f,i.value.categorias.categoria_id]])]),o("div",null,[e[10]||(e[10]=o("label",{class:"block text-sm font-medium mb-1"},"Descripción:",-1)),l(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>i.value.descripcion=r),required:"",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},null,512),[[s,i.value.descripcion]])]),o("div",null,[e[11]||(e[11]=o("label",{class:"block text-sm font-medium mb-1"},"Código de barras:",-1)),l(o("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>i.value.codigo_barras=r),required:"",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},null,512),[[s,i.value.codigo_barras]])]),o("div",null,[e[12]||(e[12]=o("label",{class:"block text-sm font-medium mb-1"},"Stock:",-1)),l(o("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>i.value.stock=r),type:"number",required:"",min:"0",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},null,512),[[s,i.value.stock,void 0,{number:!0}]])]),o("div",null,[e[13]||(e[13]=o("label",{class:"block text-sm font-medium mb-1"},"Precio:",-1)),l(o("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>i.value.precio_venta=r),type:"number",required:"",min:"0",step:"0.01",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},null,512),[[s,i.value.precio_venta,void 0,{number:!0}]])]),o("div",null,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium mb-1"},"Proveedor:",-1)),l(o("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>i.value.idproveedor=r),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"},[e[14]||(e[14]=o("option",{value:"",disabled:""},"Seleccione un proveedor",-1)),(u(!0),d(g,null,x(R(y).proveedores,r=>(u(),d("option",{key:r.id,value:r.id},a(r.empresa),9,I))),128))],512),[[f,i.value.idproveedor]])]),o("div",M,[o("button",B,a(n.value?"Actualizar":"Agregar"),1),o("button",{type:"button",onClick:S,class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancelar ")])],32)])])):_("",!0)}});export{N as _};
