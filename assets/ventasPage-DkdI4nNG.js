import{d as x,e as p,c as n,a as t,F as y,y as m,o as l,h as k,t as i,p as v,m as w,_ as D,w as b,v as h,b as _}from"./index-DIPeDiug.js";import{g as V}from"./ventasService-li5fJ0VU.js";const f=c=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(c),C={class:"mt-6"},F={class:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm"},B={class:"min-w-full divide-y divide-gray-200 text-sm text-left text-gray-800"},M={class:"divide-y divide-gray-100"},N={class:"hover:bg-gray-50 transition"},S={class:"px-4 py-3"},L={class:"px-4 py-3"},$={class:"px-4 py-3"},j={class:"px-4 py-3"},I=["onClick"],T={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},X={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},q={colspan:"4",class:"bg-gray-50 px-4 py-3"},z={class:"overflow-x-auto"},P={class:"min-w-full text-sm text-left border border-gray-200"},U={class:"px-4 py-2"},A={class:"px-4 py-2 text-right"},E={class:"px-4 py-2 text-right"},H={key:1},O=x({__name:"tablaVentas",props:{ventas:{type:Array,required:!0}},setup(c){const a=p(null),u=r=>{a.value=a.value===r?null:r};return(r,e)=>(l(),n("div",C,[t("div",F,[t("table",B,[e[4]||(e[4]=t("thead",{class:"bg-gray-100 text-gray-700 font-semibold"},[t("tr",null,[t("th",{class:"px-4 py-3"},"#"),t("th",{class:"px-4 py-3"},"Fecha"),t("th",{class:"px-4 py-3"},"Total"),t("th",{class:"px-4 py-3"},"Detalles")])],-1)),t("tbody",M,[c.ventas.length>0?(l(!0),n(y,{key:0},m(c.ventas,s=>(l(),n(y,{key:s.venta_id},[t("tr",N,[t("td",S,i(s.venta_id),1),t("td",L,i(new Date(s.fecha_venta).toLocaleString()),1),t("td",$,i(v(f)(s.total)),1),t("td",j,[t("button",{onClick:d=>u(s.venta_id),class:"flex items-center gap-1 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition"},[a.value!==s.venta_id?(l(),n("svg",T,e[0]||(e[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(l(),n("svg",X,e[1]||(e[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),w(" "+i(a.value===s.venta_id?"Ocultar":"Ver"),1)],8,I)])]),a.value===s.venta_id?(l(),n("tr",{key:"details-"+s.venta_id},[t("td",q,[t("div",z,[t("table",P,[e[2]||(e[2]=t("thead",{class:"bg-white text-gray-600 font-medium"},[t("tr",null,[t("th",{class:"px-4 py-2"},"Producto"),t("th",{class:"px-4 py-2"},"Subtotal"),t("th",{class:"px-4 py-2"},"Cantidad")])],-1)),t("tbody",null,[(l(!0),n(y,null,m(s.detalle,d=>(l(),n("tr",{key:d.producto,class:"hover:bg-gray-100 transition"},[t("td",U,i(d.producto),1),t("td",A,i(v(f)(d.subtotal)),1),t("td",E,i(d.cantidad),1)]))),128))])])])])])):k("",!0)],64))),128)):(l(),n("tr",H,e[3]||(e[3]=[t("td",{colspan:"4",class:"text-center px-4 py-6 text-gray-500"}," No hay ventas registradas para este rango de fechas. ",-1)])))])])])]))}}),G=D(O,[["__scopeId","data-v-4b9ab1a5"]]),J={class:"container mx-auto p-4 max-w-4xl bg-white border rounded-lg shadow-sm"},K={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Q=x({__name:"ventaBuscar",emits:["search"],setup(c,{emit:a}){const u=new Date().toLocaleDateString("es-MX"),r=p(u),e=p(u);function s(){r.value&&e.value?d("search",{startDate:r.value,endDate:e.value}):alert("por favor, selecciona ambas fechas.")}const d=a;return(R,o)=>(l(),n("div",J,[o[5]||(o[5]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"🔍 Filtros de búsqueda",-1)),t("div",K,[t("div",null,[o[2]||(o[2]=t("label",{for:"start-date",class:"block text-sm font-medium text-gray-700 mb-1"}," Fecha Inicio ",-1)),b(t("input",{"onUpdate:modelValue":o[0]||(o[0]=g=>r.value=g),id:"start-date",type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"},null,512),[[h,r.value]])]),t("div",null,[o[3]||(o[3]=t("label",{for:"end-date",class:"block text-sm font-medium text-gray-700 mb-1"}," Fecha Fin ",-1)),b(t("input",{"onUpdate:modelValue":o[1]||(o[1]=g=>e.value=g),id:"end-date",type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"},null,512),[[h,e.value]])]),t("div",{class:"flex items-end"},[t("button",{onClick:s,class:"flex items-center justify-center gap-2 w-full md:w-auto bg-primary-color text-white font-semibold py-2 px-4 rounded-lg hover:bg-secondary-color transition"},o[4]||(o[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-4.35-4.35m1.18-5.32a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z"})],-1),w(" Buscar ")]))])])]))}}),Z=x({__name:"ventasPage",setup(c){const a=p([]),u=async({startDate:r,endDate:e})=>{const s=await V(r,e);s.success?(a.value=s.data,console.log(a.value)):console.log(s.error)};return(r,e)=>(l(),n("div",null,[_(Q,{onSearch:u}),_(G,{ventas:a.value},null,8,["ventas"])]))}});export{Z as default};
