import{b as x}from"./ventasService-BuRPzjvh.js";import{d as k,e as c,B as C,c as i,a as t,h as m,t as l,F as b,y as v,m as n,A as _,o as r}from"./index-CCjy-gl9.js";const D={class:"px-4 py-6"},F={class:"flex justify-between items-center mb-4"},M=["disabled"],B={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},P={key:0,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},z=["onClick"],E={class:"mb-1"},N={class:"mb-1"},V={class:"mb-1"},L={class:"mb-1"},O={key:1,class:"text-center text-gray-500 text-lg mt-8"},S={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$={class:"bg-white p-6 rounded-xl w-full max-w-md shadow-lg relative"},j={class:"mt-4"},A={class:"w-full text-sm border"},T={class:"py-1 px-2"},I={class:"py-1 px-2 text-right"},H=k({__name:"pedidos",setup(U){const u=c([]),d=c(!1),a=c(null),p=s=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString("es-ES",e)};C(async()=>{const s=await x();s.success?u.value=s.data:console.log(s.error)});const f=async()=>{d.value=!0;const s=await x();d.value=!1,s.success?u.value=s.data:console.log(s.error)};function y(s){return{pendiente:"text-yellow-600",completado:"text-green-600",cancelado:"text-red-600"}[s.toLowerCase()]||"text-gray-800"}function w(s){a.value={...s}}function h(){a.value=null}return(s,e)=>(r(),i("div",D,[t("div",F,[e[1]||(e[1]=t("h1",{class:"text-3xl font-bold text-center w-full"},"Pedidos",-1)),t("button",{onClick:f,disabled:d.value,class:"ml-4 px-4 py-2 flex items-center gap-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-60 disabled:cursor-not-allowed"},[d.value?(r(),i("svg",B,e[0]||(e[0]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"},null,-1)]))):m("",!0),t("span",null,l(d.value?"Cargando...":"Actualizar"),1)],8,M)]),u.value.length>0?(r(),i("div",P,[(r(!0),i(b,null,v(u.value,o=>(r(),i("div",{key:o.venta_id,onClick:g=>w(o),class:"bg-white border border-gray-200 p-4 rounded-2xl shadow-sm transition hover:shadow-md cursor-pointer"},[t("p",E,[e[2]||(e[2]=t("strong",null,"Id:",-1)),n(" "+l(o.venta_id),1)]),t("p",N,[e[3]||(e[3]=t("strong",null,"Cliente:",-1)),n(" "+l(o.cliente),1)]),t("p",V,[e[4]||(e[4]=t("strong",null,"Dirección:",-1)),n(" "+l(o.direccion),1)]),t("p",L,[e[5]||(e[5]=t("strong",null,"Fecha:",-1)),n(" "+l(p(o.fecha_venta)),1)]),t("p",{class:_(["mt-2 font-bold",y(o.estado)])},[e[6]||(e[6]=t("strong",null,"Estatus:",-1)),n(" "+l(o.estado),1)],2)],8,z))),128))])):(r(),i("div",O,e[7]||(e[7]=[t("p",null,"No hay pedidos disponibles.",-1)]))),a.value?(r(),i("div",S,[t("div",$,[t("button",{onClick:h,class:"absolute top-2 right-2 text-gray-400 hover:text-black text-xl"},"×"),e[15]||(e[15]=t("h2",{class:"text-2xl font-bold mb-4"},"Detalles del Pedido",-1)),t("p",null,[e[8]||(e[8]=t("strong",null,"Cliente:",-1)),n(" "+l(a.value.cliente),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Dirección:",-1)),n(" "+l(a.value.direccion),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Fecha:",-1)),n(" "+l(p(a.value.fecha_venta)),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Total:",-1)),n(" $"+l(a.value.total.toFixed(2)),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Estatus:",-1)),n(" "+l(a.value.estado),1)]),t("div",j,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold mb-2"},"Productos",-1)),t("table",A,[e[13]||(e[13]=t("thead",null,[t("tr",{class:"bg-gray-100 text-left"},[t("th",{class:"py-1 px-2"},"Descripción"),t("th",{class:"py-1 px-2 text-right"},"Precio Unitario")])],-1)),t("tbody",null,[(r(!0),i(b,null,v(a.value.productos,(o,g)=>(r(),i("tr",{key:g},[t("td",T,l(o.nombre),1),t("td",I,"$"+l(o.precio_unitario.toFixed(2)),1)]))),128))])])]),e[16]||(e[16]=t("button",{class:"mt-6 w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition"}," Completar pedido ",-1))])])):m("",!0)]))}});export{H as default};
