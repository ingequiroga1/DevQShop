import{d as E,u as V,e as d,z,c as x,a as e,t as v,k as P,w as p,v as m,o as c,_ as D,B as M,f as A,g as k,h as $,i as L,F as T,y as G,A as I,I as R}from"./index-CCjy-gl9.js";const H={class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},J={class:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6 relative"},K={class:"text-xl font-semibold mb-4"},O={class:"flex justify-end gap-2 mt-4"},Q=E({__name:"proveedorForm",props:{proveedor:{},modo:{}},emits:["guardado","cerrar"],setup(g,{emit:s}){const l=V(),u=g,f=s,t=d({...u.proveedor});z(()=>u.proveedor,a=>{t.value={...a}});const y=async()=>{u.modo==="editar"?await l.updateProveedor(t.value):await l.createProveedor(t.value),f("guardado")};return(a,o)=>(c(),x("div",H,[e("div",J,[e("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-red-600",onClick:o[0]||(o[0]=r=>a.$emit("cerrar"))}," ‚úï "),e("h2",K,v(a.modo==="editar"?"Editar proveedor":"Nuevo proveedor"),1),e("form",{onSubmit:P(y,["prevent"]),class:"space-y-4"},[e("div",null,[o[8]||(o[8]=e("label",{class:"block text-gray-700 mb-1"},"*Nombre:",-1)),p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>t.value.nombre=r),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"},null,512),[[m,t.value.nombre]])]),e("div",null,[o[9]||(o[9]=e("label",{class:"block text-gray-700 mb-1"},"*Empresa:",-1)),p(e("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>t.value.empresa=r),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"},null,512),[[m,t.value.empresa]])]),e("div",null,[o[10]||(o[10]=e("label",{class:"block text-gray-700 mb-1"},"*Tel√©fono:",-1)),p(e("input",{"onUpdate:modelValue":o[3]||(o[3]=r=>t.value.telefono=r),type:"tel",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"},null,512),[[m,t.value.telefono]])]),e("div",null,[o[11]||(o[11]=e("label",{class:"block text-gray-700 mb-1"},"*Correo:",-1)),p(e("input",{"onUpdate:modelValue":o[4]||(o[4]=r=>t.value.correo=r),type:"email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"},null,512),[[m,t.value.correo]])]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-gray-700 mb-1"},"*Direcci√≥n:",-1)),p(e("input",{"onUpdate:modelValue":o[5]||(o[5]=r=>t.value.direccion=r),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"},null,512),[[m,t.value.direccion]])]),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-gray-700 mb-1"},"Notas:",-1)),p(e("input",{"onUpdate:modelValue":o[6]||(o[6]=r=>t.value.notas=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"},null,512),[[m,t.value.notas]])]),e("div",O,[e("button",{type:"button",onClick:o[7]||(o[7]=r=>a.$emit("cerrar")),class:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300"}," Cancelar "),o[14]||(o[14]=e("button",{type:"submit",class:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700"}," Guardar ",-1))])],32)])]))}}),W=D(Q,[["__scopeId","data-v-2be7d555"]]),X={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Y={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},Z={class:"text-lg font-bold mb-2"},ee={class:"text-gray-700 mb-6"},oe={class:"flex justify-end gap-2"},re={__name:"confirmComponent",props:{titulo:{type:String,default:"¬øEst√°s seguro?"},mensaje:{type:String,default:"Esta acci√≥n no se puede deshacer."},textoConfirmar:{type:String,default:"Eliminar"}},emits:["confirmar","cancelar"],setup(g){return(s,l)=>(c(),x("div",X,[e("div",Y,[e("h2",Z,v(g.titulo),1),e("p",ee,v(g.mensaje),1),e("div",oe,[e("button",{class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:l[0]||(l[0]=u=>s.$emit("cancelar"))}," Cancelar "),e("button",{class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",onClick:l[1]||(l[1]=u=>s.$emit("confirmar"))},v(g.textoConfirmar),1)])])]))}},te={class:"min-h-screen bg-gray-50"},se={class:"p-4 max-w-xl mx-auto"},le=["onClick"],ae=["src"],ne={class:"flex-1"},de={class:"text-lg font-medium text-gray-800"},ue={class:"text-sm text-gray-500"},ie={class:"flex items-center space-x-3 text-gray-600"},ce={class:"text-sm"},pe=["onClick"],me=["onClick"],ge=E({__name:"provPage",setup(g){const s=V(),l=d(!1),u=d(""),f=d("info"),t=R(),y=d(""),a=d(null),o=d(!1),r=d(!1),w=d({id:"",nombre:"",empresa:"",correo:"",telefono:"",direccion:"",notas:"",imagen:""}),C=d("crear");M(()=>{s.fetchProveedores()});const F=A(()=>s.proveedores.filter(i=>i.nombre.toLowerCase().includes(y.value.toLowerCase()))),S=i=>{a.value=i,t.push({name:"detalleProveedor",params:{id:i}})},q=i=>{o.value=!0,a.value=i},U=async()=>{a.value!==null&&await s.deleteProveedor(a.value),_()},B=i=>{w.value={...i},C.value="editar",r.value=!0},h=()=>{r.value=!1,s.msgProveedores&&(f.value=s.msgProveedores.tipo,l.value=!0,u.value=s.msgProveedores.mensaje,s.msgProveedores=null)},N=()=>{w.value={id:"",nombre:"",empresa:"",correo:"",telefono:"",direccion:"",notas:"",imagen:""},C.value="crear",r.value=!0},_=()=>{a.value=null,o.value=!1,s.msgProveedores&&(f.value=s.msgProveedores.tipo,l.value=!0,u.value=s.msgProveedores.mensaje,s.msgProveedores=null)};return(i,b)=>(c(),x("div",te,[b[2]||(b[2]=e("div",{class:"bg-purple-700 text-white text-xl font-semibold p-4 rounded-b-md shadow"}," Proveedores ",-1)),e("div",se,[l.value?(c(),k(L,{key:0,type:f.value,message:u.value,dismissible:"",onClose:b[0]||(b[0]=n=>l.value=!1)},null,8,["type","message"])):$("",!0),p(e("input",{"onUpdate:modelValue":b[1]||(b[1]=n=>y.value=n),type:"text",placeholder:"Buscar Proveedor",class:"w-full p-2 mb-4 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[m,y.value]]),(c(!0),x(T,null,G(F.value,n=>(c(),x("div",{key:n.id,onClick:j=>S(n.id),class:I(["flex items-center bg-white rounded-lg shadow-sm p-4 mb-4 cursor-pointer hover:border-purple-500 transition border border-transparent",{"border-2 border-blue-400":n.id===a.value}])},[e("img",{src:n.imagen,alt:"Foto del proveedor",class:"w-12 h-12 rounded-full mr-4 object-cover"},null,8,ae),e("div",ne,[e("h3",de,v(n.nombre),1),e("p",ue,v(n.empresa),1)]),e("div",ie,[e("span",ce,"üìû "+v(n.telefono),1),e("button",{onClick:P(j=>q(n.id),["stop"]),class:"hover:text-red-600"},"üóëÔ∏è",8,pe),e("button",{onClick:P(j=>B(n),["stop"]),class:"hover:text-yellow-500"},"‚úèÔ∏è",8,me)])],10,le))),128)),e("div",{class:"flex justify-end"},[e("button",{onClick:N,class:"bg-green-500 hover:bg-green-600 text-white font-medium px-6 py-2 rounded-full shadow transition"}," Nuevo ")]),r.value?(c(),k(W,{key:1,proveedor:w.value,modo:C.value,onGuardado:h,onCerrar:h},null,8,["proveedor","modo"])):$("",!0),o.value?(c(),k(re,{key:2,titulo:"Eliminar proveedor",mensaje:"¬øEst√°s seguro de que deseas eliminar este proveedor? Esta acci√≥n no se puede deshacer.",onConfirmar:U,onCancelar:_})):$("",!0)])]))}});export{ge as default};
