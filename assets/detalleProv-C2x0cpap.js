import{d as D,u as M,J as N,e as a,B as S,c as d,h as v,b as I,a as e,m as l,t as n,p as _,F as k,y as V,o as u,_ as $}from"./index-CCjy-gl9.js";import{_ as B}from"./modalProductos.vue_vue_type_script_setup_true_lang-BhFw3PTS.js";const A={key:0,class:"p-6 max-w-4xl mx-auto space-y-6"},F={class:"bg-white shadow-md rounded-xl p-6 border"},T={class:"text-gray-700"},q={class:"text-gray-700"},z={class:"text-gray-700 text-xl"},J={key:0,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},L={class:"space-y-1 mb-4"},R={class:"flex gap-2"},G=["onClick"],H=["onClick"],K={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},O={class:"bg-white rounded-lg p-6 w-full max-w-sm"},Q={class:"flex justify-end gap-2"},U=D({__name:"detalleProv",setup(W){const t=M(),b=N().params.id,i=a(),c=a(!1),g=a(0),p=a(!1),x=a(!1),f=a(""),y=a("info"),m=a({producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""},subtotal:0,cantidad:0});S(async()=>{i.value=t.getProveedor(b),await t.fetchProdxProv(b)});const w=()=>{p.value=!1,m.value={producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:"",categorias:{categoria_id:0,nombre:""},subtotal:0,cantidad:0},t.msgProductos&&(y.value=t.msgProductos.tipo,x.value=!0,f.value=t.msgProductos.mensaje,t.msgProductos=null)},P=s=>{m.value={...s,subtotal:s.subtotal??0,cantidad:s.cantidad??0},p.value=!0},h=()=>{var s;p.value=!0,m.value={producto_id:0,nombre:"",descripcion:"",codigo_barras:"",stock:0,stock_minimo:0,precio_venta:0,idproveedor:((s=i.value)==null?void 0:s.id)||"",categorias:{categoria_id:0,nombre:""},subtotal:0,cantidad:0}},C=async()=>{await t.deleteProducto(g.value),c.value=!1,g.value=0,t.msgProductos&&(y.value=t.msgProductos.tipo,x.value=!0,f.value=t.msgProductos.mensaje,t.msgProductos=null)},E=s=>{g.value=Number(s),c.value=!0};return(s,o)=>(u(),d(k,null,[i.value?(u(),d("div",A,[o[10]||(o[10]=e("div",{class:"flex items-center justify-between"},[e("h2",{class:"text-2xl font-bold text-gray-800"},"Detalle del proveedor")],-1)),e("div",F,[o[4]||(o[4]=e("h3",{class:"text-xl font-semibold text-gray-800 mb-4"},"Información del proveedor",-1)),e("p",T,[o[1]||(o[1]=e("strong",null,"ID:",-1)),l(" "+n(s.$route.params.id),1)]),e("p",q,[o[2]||(o[2]=e("strong",null,"Nombre:",-1)),l(" "+n(i.value.nombre),1)]),e("p",z,[o[3]||(o[3]=e("strong",null,"Empresa:",-1)),l(" "+n(i.value.empresa),1)])]),e("div",{class:"flex items-center justify-between"},[o[5]||(o[5]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Productos",-1)),e("button",{onClick:h,class:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 transition"}," + Agregar producto ")]),_(t).productosxproveedor.length>0?(u(),d("div",J,[(u(!0),d(k,null,V(_(t).productosxproveedor,r=>(u(),d("div",{key:r.producto_id,class:"bg-white border border-gray-200 p-4 rounded-2xl shadow-sm transition hover:shadow-md cursor-pointer flex flex-col justify-between"},[e("div",L,[e("p",null,[o[6]||(o[6]=e("strong",null,"Id:",-1)),l(" "+n(r.producto_id),1)]),e("p",null,[o[7]||(o[7]=e("strong",null,"Nombre:",-1)),l(" "+n(r.nombre),1)]),e("p",null,[o[8]||(o[8]=e("strong",null,"Descripción:",-1)),l(" "+n(r.descripcion),1)]),e("p",null,[o[9]||(o[9]=e("strong",null,"Stock:",-1)),l(" "+n(r.stock),1)])]),e("div",R,[e("button",{onClick:j=>P(r),class:"flex-1 bg-primary-color text-white py-1 rounded-md hover:bg-secondary-color transition"}," Editar ",8,G),e("button",{onClick:j=>E(String(r.producto_id)),class:"flex-1 bg-red-500 text-white py-1 rounded-md hover:bg-red-600 transition"}," Eliminar ",8,H)])]))),128))])):v("",!0)])):v("",!0),I(B,{visible:p.value,productoEditar:m.value,proveedor:i.value,onCerrar:w},null,8,["visible","productoEditar","proveedor"]),c.value?(u(),d("div",K,[e("div",O,[o[11]||(o[11]=e("h3",{class:"text-lg font-semibold mb-4"},"Confirmar Eliminación",-1)),o[12]||(o[12]=e("p",{class:"text-sm mb-4"}," ¿Estás seguro de que deseas eliminar este producto? ",-1)),e("div",Q,[e("button",{onClick:C,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," Eliminar "),e("button",{onClick:o[0]||(o[0]=r=>c.value=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancelar ")])])])):v("",!0)],64))}}),ee=$(U,[["__scopeId","data-v-13489b72"]]);export{ee as default};
