import{d as C,j as D,k as N,o as a,c as i,a as t,w as g,h as S,l as j,_ as U,e as m,m as E,n as v,f as G,v as _,p as K,t as d,F as h,q,x as k,y as A,r as L,b as O}from"./index-DDlZDCsm.js";const R={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},z={class:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},H={class:"flex flex-row-reverse mt-6 gap-2"},J={class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},Q=C({__name:"modalPdf",emits:["close"],setup($,{emit:u}){const r=u,c=()=>{r("close")},x=()=>{window.location.reload()};return D(()=>{window.onafterprint=x}),N(()=>{window.onafterprint=null}),(p,n)=>{const b=j("print");return a(),i("div",R,[t("div",z,[n[1]||(n[1]=t("div",{id:"printMe",style:{"background-color":"red"}},[t("div",null,[t("h1",null,"Formato a imprimir"),t("p",null,"Estos son los datos de la venta")])],-1)),t("div",H,[t("button",{onClick:c,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Cerrar "),g((a(),i("button",J,n[0]||(n[0]=[S(" Imprimir ")]))),[[b,"#printMe"]])])])])}}}),W=U(Q,[["__scopeId","data-v-9430669e"]]),X={class:"max-w-3xl mx-auto bg-white shadow-md rounded-lg p-6"},Y={class:"mb-4"},Z={class:"flex justify-between mb-4"},tt={id:"totalVenta",class:"text-2xl font-bold text-indigo-600"},et={id:"numProductos",class:"text-2xl font-bold text-indigo-600"},ot={class:"overflow-x-auto"},st={class:"min-w-full bg-white border border-gray-200"},nt={id:"productosTabla"},lt={class:"text-center"},dt={class:"text-center"},at={class:"text-center"},it={class:"text-center"},rt={class:"text-center"},ct=["onClick"],ut={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},bt={key:0,class:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},mt={class:"mb-4 mt-4"},xt={class:"mb-4 mt-4"},pt={class:"flex gap-2"},ft={key:1,class:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},vt={class:"mb-4 mt-4"},gt={class:"mb-4 mt-4"},_t=C({__name:"homePage",setup($){const u=m(""),r=m(!1),c=m(0),x=m(!1),p=m(!1),n=E([]),b=v(()=>n.reduce((s,e)=>s+e.subtotal,0)),P=v(()=>n.reduce((s,e)=>s+e.cantidad,0)),w=v(()=>Math.max(c.value-b.value,0)),M=[{id:1,nombre:"Coca-Cola 500ml",precio:15,cantidad:0,barcode:"2600001324",subtotal:0},{id:2,nombre:"Pan Dulce",precio:8,cantidad:0,barcode:"pd1234",subtotal:0}];function y(){const s=u.value.trim();if(s==="")return;const e=M.find(l=>l.barcode===s);if(e){const l=n.find(o=>o.id===e.id);l?(l.cantidad+=1,l.subtotal=l.cantidad*l.precio):n.push({...e,cantidad:1,subtotal:e.precio})}else console.warn("Producto no encontrado");u.value=""}const V=s=>{if(s.cantidad>1)s.cantidad-=1,s.subtotal=s.cantidad*s.precio;else{const e=n.findIndex(l=>l.id==s.id);e!==-1&&n.splice(e,1)}},f=s=>{c.value+=s},F=()=>{c.value=0,r.value=!1},I=()=>{x.value=!0},T=()=>{r.value=!1,p.value=!0},B=()=>{r.value=!1,window.location.reload()};return(s,e)=>{const l=L("font-awesome-icon");return a(),i(h,null,[t("div",X,[e[11]||(e[11]=t("h1",{class:"text-2xl font-bold mb-4 text-gray-800"},"Pantalla de Ventas",-1)),t("form",{onSubmit:G(y,["prevent"])},[t("div",Y,[e[7]||(e[7]=t("label",{for:"barcode",class:"block text-sm font-medium text-gray-700"},"Código de Barras",-1)),g(t("input",{type:"text",id:"barcode",placeholder:"Ingresa el código de barras",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm","onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),onKeyup:K(y,["enter"])},null,544),[[_,u.value]])])],32),t("div",Z,[t("div",null,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold text-gray-700"},"Total de la Venta:",-1)),t("p",tt,"$"+d(b.value.toFixed(2)),1)]),t("div",null,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold text-gray-700"},"Número de Productos:",-1)),t("p",et,d(P.value),1)])]),t("div",ot,[t("table",st,[e[10]||(e[10]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Cantidad"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Nombre"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Precio"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Subtotal"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Acciones")])],-1)),t("tbody",nt,[(a(!0),i(h,null,q(n,o=>(a(),i("tr",{key:o.id},[t("td",lt,d(o.cantidad),1),t("td",dt,d(o.nombre),1),t("td",at,"$"+d(o.precio.toFixed(2)),1),t("td",it,"$"+d(o.subtotal.toFixed(2)),1),t("td",rt,[t("button",{onClick:wt=>V(o),class:"text-red-500 hover:text-red-700 focus:outline-none text-xl"},[O(l,{icon:["fas","minus"]})],8,ct)])]))),128))])])]),t("div",null,[t("button",{onClick:e[1]||(e[1]=o=>r.value=!0),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"}," Cobrar ")])]),r.value?(a(),i("div",ut,[x.value?(a(),i("div",ft,[e[13]||(e[13]=t("h2",{class:"text-2xl font-semibold mb-4"},"Se registro la venta por:",-1)),t("div",null,[t("p",vt," Total $"+d(b.value.toFixed(2)),1),t("p",gt," Cambio $"+d(w.value.toFixed(2)),1)]),t("div",{class:"flex flex-row-reverse mt-6 gap-2"},[t("button",{onClick:B,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Salir"),t("button",{onClick:T,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Imprimir Ticket")])])):(a(),i("div",bt,[e[12]||(e[12]=t("h2",{class:"text-2xl font-semibold mb-4"},"Monto Recibido",-1)),t("div",null,[g(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=o=>c.value=o),placeholder:"$0.00",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[_,c.value]])]),t("div",null,[t("p",mt," Total $"+d(b.value.toFixed(2)),1),t("p",xt," Cambio $"+d(w.value.toFixed(2)),1)]),t("div",pt,[t("button",{onClick:e[3]||(e[3]=o=>f(10)),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"$10"),t("button",{onClick:e[4]||(e[4]=o=>f(20)),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"$20"),t("button",{onClick:e[5]||(e[5]=o=>f(50)),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"$50")]),t("div",{class:"flex flex-row-reverse mt-6 gap-2"},[t("button",{onClick:F,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Cerrar"),t("button",{onClick:I,class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"Generar Venta")])]))])):k("",!0),p.value?(a(),A(W,{key:1,onClose:e[6]||(e[6]=o=>p.value=!1)})):k("",!0)],64)}}});export{_t as default};
