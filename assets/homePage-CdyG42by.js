import{d as $,e as x,j as B,k as D,o as r,c as u,a as t,_ as L,l as N,m as g,f as j,w as _,v as h,n as H,t as l,F as k,p as U,q as C,x as E,r as G,b as K}from"./index-BSmM5mDz.js";const q={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},A={class:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},O=$({__name:"modalPdf",emits:["close"],setup(P,{emit:b}){const a=b,i=x(null),f=()=>{a("close")},p=()=>{a("close");const c=i.value.innerHTML,m=document.body.innerHTML;document.body.innerHTML=c,window.print(),document.body.innerHTML=m},d=()=>{window.location.reload()};return B(()=>{window.onafterprint=d}),D(()=>{window.onafterprint=null}),(c,m)=>(r(),u("div",q,[t("div",A,[t("div",{ref_key:"printSection",ref:i},m[0]||(m[0]=[t("div",null,[t("h1",null,"Formato a imprimir"),t("p",null,"Estos son los datos de la venta")],-1)]),512),t("div",{class:"flex flex-row-reverse mt-6 gap-2"},[t("button",{onClick:f,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Cerrar "),t("button",{onClick:p,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"}," Imprimir ")])])]))}}),R=L(O,[["__scopeId","data-v-18aebf18"]]),z={class:"max-w-3xl mx-auto bg-white shadow-md rounded-lg p-6"},J={class:"mb-4"},Q={class:"flex justify-between mb-4"},W={id:"totalVenta",class:"text-2xl font-bold text-indigo-600"},X={id:"numProductos",class:"text-2xl font-bold text-indigo-600"},Y={class:"overflow-x-auto"},Z={class:"min-w-full bg-white border border-gray-200"},tt={id:"productosTabla"},et={class:"text-center"},ot={class:"text-center"},st={class:"text-center"},nt={class:"text-center"},lt={class:"text-center"},dt=["onClick"],at={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},it={key:0,class:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},rt={class:"mb-4 mt-4"},ct={class:"mb-4 mt-4"},ut={class:"flex gap-2"},bt={key:1,class:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},mt={class:"mb-4 mt-4"},xt={class:"mb-4 mt-4"},vt=$({__name:"homePage",setup(P){const b=x(""),a=x(!1),i=x(0),f=x(!1),p=x(!1),d=N([]),c=g(()=>d.reduce((s,e)=>s+e.subtotal,0)),m=g(()=>d.reduce((s,e)=>s+e.cantidad,0)),w=g(()=>Math.max(i.value-c.value,0)),M=[{id:1,nombre:"Coca-Cola 500ml",precio:15,cantidad:0,barcode:"2600001324",subtotal:0},{id:2,nombre:"Pan Dulce",precio:8,cantidad:0,barcode:"pd1234",subtotal:0}];function y(){const s=b.value.trim();if(s==="")return;const e=M.find(n=>n.barcode===s);if(e){const n=d.find(o=>o.id===e.id);n?(n.cantidad+=1,n.subtotal=n.cantidad*n.precio):d.push({...e,cantidad:1,subtotal:e.precio})}else console.warn("Producto no encontrado");b.value=""}const V=s=>{if(s.cantidad>1)s.cantidad-=1,s.subtotal=s.cantidad*s.precio;else{const e=d.findIndex(n=>n.id==s.id);e!==-1&&d.splice(e,1)}},v=s=>{i.value+=s},F=()=>{i.value=0,a.value=!1},T=()=>{f.value=!0},S=()=>{a.value=!1,p.value=!0},I=()=>{a.value=!1,window.location.reload()};return(s,e)=>{const n=G("font-awesome-icon");return r(),u(k,null,[t("div",z,[e[11]||(e[11]=t("h1",{class:"text-2xl font-bold mb-4 text-gray-800"},"Pantalla de Ventas",-1)),t("form",{onSubmit:j(y,["prevent"])},[t("div",J,[e[7]||(e[7]=t("label",{for:"barcode",class:"block text-sm font-medium text-gray-700"},"Código de Barras",-1)),_(t("input",{type:"text",id:"barcode",placeholder:"Ingresa el código de barras",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm","onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),onKeyup:H(y,["enter"])},null,544),[[h,b.value]])])],32),t("div",Q,[t("div",null,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold text-gray-700"},"Total de la Venta:",-1)),t("p",W,"$"+l(c.value.toFixed(2)),1)]),t("div",null,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold text-gray-700"},"Número de Productos:",-1)),t("p",X,l(m.value),1)])]),t("div",Y,[t("table",Z,[e[10]||(e[10]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Cantidad"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Nombre"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Precio"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Subtotal"),t("th",{class:"py-2 px-4 border-b text-center text-sm font-semibold text-gray-600"},"Acciones")])],-1)),t("tbody",tt,[(r(!0),u(k,null,U(d,o=>(r(),u("tr",{key:o.id},[t("td",et,l(o.cantidad),1),t("td",ot,l(o.nombre),1),t("td",st,"$"+l(o.precio.toFixed(2)),1),t("td",nt,"$"+l(o.subtotal.toFixed(2)),1),t("td",lt,[t("button",{onClick:pt=>V(o),class:"text-red-500 hover:text-red-700 focus:outline-none text-xl"},[K(n,{icon:["fas","minus"]})],8,dt)])]))),128))])])]),t("div",null,[t("button",{onClick:e[1]||(e[1]=o=>a.value=!0),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"}," Cobrar ")])]),a.value?(r(),u("div",at,[f.value?(r(),u("div",bt,[e[13]||(e[13]=t("h2",{class:"text-2xl font-semibold mb-4"},"Se registro la venta por:",-1)),t("div",null,[t("p",mt," Total $"+l(c.value.toFixed(2)),1),t("p",xt," Cambio $"+l(w.value.toFixed(2)),1)]),t("div",{class:"flex flex-row-reverse mt-6 gap-2"},[t("button",{onClick:I,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Salir"),t("button",{onClick:S,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Imprimir Ticket")])])):(r(),u("div",it,[e[12]||(e[12]=t("h2",{class:"text-2xl font-semibold mb-4"},"Monto Recibido",-1)),t("div",null,[_(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=o=>i.value=o),placeholder:"$0.00",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[h,i.value]])]),t("div",null,[t("p",rt," Total $"+l(c.value.toFixed(2)),1),t("p",ct," Cambio $"+l(w.value.toFixed(2)),1)]),t("div",ut,[t("button",{onClick:e[3]||(e[3]=o=>v(10)),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"$10"),t("button",{onClick:e[4]||(e[4]=o=>v(20)),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"$20"),t("button",{onClick:e[5]||(e[5]=o=>v(50)),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"$50")]),t("div",{class:"flex flex-row-reverse mt-6 gap-2"},[t("button",{onClick:F,class:"bg-red-500 text-white font-bold py-2 px-4 rounded"},"Cerrar"),t("button",{onClick:T,class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"},"Generar Venta")])]))])):C("",!0),p.value?(r(),E(R,{key:1,onClose:e[6]||(e[6]=o=>p.value=!1)})):C("",!0)],64)}}});export{vt as default};
